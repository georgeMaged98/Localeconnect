<div class="filters-and-search-container">
  <div class="search-container">
    <input matInput [formControl]="searchControl" placeholder="Search meetups by name" class="search-bar"/>
    <button mat-icon-button class="search-button" (click)="performSearch()">
      <mat-icon>search</mat-icon>
    </button>
  </div>
</div>

<ng-container class="main-container" *ngFor="let meetup of meetups">
  <mat-card class="meetup-card">
    <div class="card-content">
      <div class="details-container">
        <mat-card-header>
          <mat-card-title>{{ meetup.name }}</mat-card-title>
          <mat-card-subtitle>Organized by: {{ meetup.creatorName }}</mat-card-subtitle>
          <div class="reviews-container">
            <app-review [(rating)]="meetup.rating" (ratingChange)="submitRating(meetup, $event)"></app-review>
            <div class="rating-details">
              <div *ngIf="meetup.averageRating"><span
                class="average-rating">{{ meetup.averageRating | number: '1.1-1' }} stars ( {{meetup.totalRatings}} ratings)</span>
              </div>

            </div>
          </div>
        </mat-card-header>

        <mat-card-content *ngIf="meetup.expand" class="meetup-details">
          <p>{{ meetup.description }}</p>
          <h4>Location:</h4>
          <p>{{ meetup.location }}</p>
          <h4>Cost:</h4>
          <p>{{ meetup.cost | currency:'EUR':true }}</p>
          <h4>Date:</h4>
          <p>{{ meetup.date | date }}</p>
          <p><b>Start Time:</b> {{ meetup.startTime }}</p>
          <p><b>End Time:</b> {{ meetup.endTime }}</p>
          <div *ngIf="meetup.spokenLanguages.length">
            <h4>Spoken Languages: </h4>
            <mat-chip-listbox>
              <mat-chip class="lang" *ngFor="let lang of meetup.spokenLanguages">{{ lang }}</mat-chip>
            </mat-chip-listbox>
          </div>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button (click)="toggleDetails(meetup)">{{ meetup.expand ? 'Hide Details' : 'View Details' }}
          </button>
          <button mat-button (click)="attendMeetup(meetup.id)">Attend</button>
        </mat-card-actions>
      </div>
    </div>
  </mat-card>
</ng-container>
<div class="button-container">
  <button mat-raised-button>Add Meetup</button>
</div>
